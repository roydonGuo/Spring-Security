{"remainingRequest":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\node_modules\\babel-loader\\lib\\index.js!D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\src\\utils\\request.js","dependencies":[{"path":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\src\\utils\\request.js","mtime":1664885841939},{"path":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\babel.config.js","mtime":1640230480000},{"path":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1664886187438},{"path":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\node_modules\\babel-loader\\lib\\index.js","mtime":1664886188818},{"path":"D:\\JAVA\\IDEA\\IDEAProjects\\Spring-Security\\vue_security_cors\\node_modules\\eslint-loader\\index.js","mtime":1664886187798}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDpcXEpBVkFcXElERUFcXElERUFQcm9qZWN0c1xcU3ByaW5nLVNlY3VyaXR5XFx2dWVfc2VjdXJpdHlfY29yc1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcdHlwZW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgKiBhcyB2YW50IGZyb20gJ3ZhbnQnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7IC8vIGNyZWF0ZSBhbiBheGlvcyBpbnN0YW5jZQoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjkwOTAnLAogIC8vIHVybCA9IGJhc2UgdXJsICsgcmVxdWVzdCB1cmwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsgLy8gcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOaYr+WQpumcgOimgeiuvue9riB0b2tlbgogIHZhciBpc1Rva2VuID0gKGNvbmZpZy5oZWFkZXJzIHx8IHt9KS5pc1Rva2VuID09PSBmYWxzZTsgLy8gZG8gc29tZXRoaW5nIGJlZm9yZSByZXF1ZXN0IGlzIHNlbnQKCiAgaWYgKGdldFRva2VuKCkgJiYgIWlzVG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLnRva2VuID0gZ2V0VG9rZW4oKTsKICB9IC8vIGdldOivt+axguaYoOWwhHBhcmFtc+WPguaVsAoKCiAgaWYgKGNvbmZpZy5tZXRob2QgPT09ICdnZXQnICYmIGNvbmZpZy5wYXJhbXMpIHsKICAgIHZhciB1cmwgPSBjb25maWcudXJsICsgJz8nOwoKICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnLnBhcmFtcyk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykgewogICAgICB2YXIgcHJvcE5hbWUgPSBfT2JqZWN0JGtleXNbX2ldOwogICAgICB2YXIgdmFsdWUgPSBjb25maWcucGFyYW1zW3Byb3BOYW1lXTsKICAgICAgdmFyIHBhcnQgPSBlbmNvZGVVUklDb21wb25lbnQocHJvcE5hbWUpICsgJz0nOwoKICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBpZiAoX3R5cGVvZih2YWx1ZSkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMyID0gT2JqZWN0LmtleXModmFsdWUpOyBfaTIgPCBfT2JqZWN0JGtleXMyLmxlbmd0aDsgX2kyKyspIHsKICAgICAgICAgICAgdmFyIGtleSA9IF9PYmplY3Qka2V5czJbX2kyXTsKCiAgICAgICAgICAgIGlmICh2YWx1ZVtrZXldICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZVtrZXldICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBwcm9wTmFtZSArICdbJyArIGtleSArICddJzsKICAgICAgICAgICAgICB2YXIgc3ViUGFydCA9IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXMpICsgJz0nOwogICAgICAgICAgICAgIHVybCArPSBzdWJQYXJ0ICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2tleV0pICsgJyYnOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVybCArPSBwYXJ0ICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArICcmJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpOwogICAgY29uZmlnLnBhcmFtcyA9IHt9OwogICAgY29uZmlnLnVybCA9IHVybDsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8vIGRvIHNvbWV0aGluZyB3aXRoIHJlcXVlc3QgZXJyb3IKICBjb25zb2xlLmxvZyhlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8gcmVzcG9uc2UgaW50ZXJjZXB0b3IKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKLyoqDQogKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzDQogKiBQbGVhc2UgcmV0dXJuICByZXNwb25zZSA9PiByZXNwb25zZQ0KKi8KCi8qKg0KICogRGV0ZXJtaW5lIHRoZSByZXF1ZXN0IHN0YXR1cyBieSBjdXN0b20gY29kZQ0KICogSGVyZSBpcyBqdXN0IGFuIGV4YW1wbGUNCiAqIFlvdSBjYW4gYWxzbyBqdWRnZSB0aGUgc3RhdHVzIGJ5IEhUVFAgU3RhdHVzIENvZGUNCiAqLwpmdW5jdGlvbiAocmVzcG9uc2UpIHsKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgaWYgKHJlcy5jb2RlICE9PSAyMDApIHsKICAgIHZhbnQuVG9hc3QoewogICAgICBtZXNzYWdlOiByZXMubXNnIHx8ICdFcnJvcicsCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKHJlcy5tc2cgfHwgJ0Vycm9yJykpOwogIH0gZWxzZSB7CiAgICByZXR1cm4gcmVzOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ2VycicgKyBlcnJvcik7IC8vIGZvciBkZWJ1ZwoKICB2YW50LlRvYXN0KHsKICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDUgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["D:/JAVA/IDEA/IDEAProjects/Spring-Security/vue_security_cors/src/utils/request.js"],"names":["axios","vant","getToken","service","create","baseURL","timeout","interceptors","request","use","config","isToken","headers","token","method","params","url","Object","keys","propName","value","part","encodeURIComponent","key","subPart","slice","error","console","log","Promise","reject","response","res","data","code","Toast","message","msg","type","duration","Error"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport * as vant from 'vant'\r\nimport { getToken } from '@/utils/auth'\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: 'http://localhost:9090', // url = base url + request url\r\n  // withCredentials: true, // send cookies when cross-domain requests\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n\r\n  config => {\r\n    // 是否需要设置 token\r\n    const isToken = (config.headers || {}).isToken === false\r\n    // do something before request is sent\r\n    if (getToken() && !isToken) {\r\n      config.headers.token = getToken()\r\n    }\r\n    // get请求映射params参数\r\n    if (config.method === 'get' && config.params) {\r\n      let url = config.url + '?'\r\n      for (const propName of Object.keys(config.params)) {\r\n        const value = config.params[propName]\r\n        var part = encodeURIComponent(propName) + '='\r\n        if (value !== null && typeof (value) !== 'undefined') {\r\n          if (typeof value === 'object') {\r\n            for (const key of Object.keys(value)) {\r\n              if (value[key] !== null && typeof (value[key]) !== 'undefined') {\r\n                const params = propName + '[' + key + ']'\r\n                const subPart = encodeURIComponent(params) + '='\r\n                url += subPart + encodeURIComponent(value[key]) + '&'\r\n              }\r\n            }\r\n          } else {\r\n            url += part + encodeURIComponent(value) + '&'\r\n          }\r\n        }\r\n      }\r\n      url = url.slice(0, -1)\r\n      config.params = {}\r\n      config.url = url\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    // do something with request error\r\n    console.log(error) // for debug\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  /**\r\n   * If you want to get http information such as headers or status\r\n   * Please return  response => response\r\n  */\r\n\r\n  /**\r\n   * Determine the request status by custom code\r\n   * Here is just an example\r\n   * You can also judge the status by HTTP Status Code\r\n   */\r\n  response => {\r\n    const res = response.data\r\n\r\n    if (res.code !== 200) {\r\n      vant.Toast({\r\n        message: res.msg || 'Error',\r\n        type: 'error',\r\n        duration: 5 * 1000\r\n      })\r\n      return Promise.reject(new Error(res.msg || 'Error'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.log('err' + error) // for debug\r\n    vant.Toast({\r\n      message: error.message,\r\n      type: 'error',\r\n      duration: 5 * 1000\r\n    })\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\nexport default service\r\n"]}]}